!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);var r=t;r=r.L||(r.L={}),r=r.tileLayer||(r.tileLayer={}),r.hoverboard=e()}}(function(){return function e(t,r,o){function n(f,s){if(!r[f]){if(!t[f]){var a="function"==typeof require&&require;if(!s&&a)return a(f,!0);if(i)return i(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[f]={exports:{}};t[f][0].call(c.exports,function(e){var r=t[f][1][e];return n(r?r:e)},c,c.exports,e,t,r,o)}return r[f].exports}for(var i="function"==typeof require&&require,f=0;f<o.length;f++)n(o[f]);return n}({1:[function(e,t){var r=e("./renderingInterface");t.exports=function(e,t){t=t||{},t.async=!0;var o=L.tileLayer.canvas(t);o.setUrl(e);var n={};n.WGS84=function(e){return e=e||{x:0,y:0},d3.geo.transform({point:function(t,r){var n=o._map.latLngToLayerPoint(new L.LatLng(r,t));this.stream.point(n.x-e.x,n.y-e.y)}})};var i={};i.geojson={extensions:["geojson","json"],get:function(e,t){var r=d3.xhr(e).responseType("json").get(t);return r.abort.bind(r)},parse:function(e,t){var r={x:parseInt(d3.select(t).style("left").slice(0,-2)),y:parseInt(d3.select(t).style("top").slice(0,-2))};return{data:e,projection:n.WGS84(r)}}},i.topojson={extensions:["topojson"],get:function(e,t){var r=d3.xhr(e).responseType("json").get(t);return r.abort.bind(r)},parse:function(e,t){var r={x:parseInt(d3.select(t).style("left").slice(0,-2)),y:parseInt(d3.select(t).style("top").slice(0,-2))},o={};for(var i in e.objects)o[i]=topojson.feature(e,e.objects[i]);return{data:o,projection:n.WGS84(r)}}},i.protobuf={extensions:["mvt","pbf","mapbox"],get:function(e,t){var r=d3.xhr(e).responseType("arraybuffer").get(t);return r.abort.bind(r)},parse:function(e,r){var n=new VectorTile(new pbf(new Uint8Array(e))),i={};for(var f in n.layers)i[f]=n.layers[f].toGeoJSON();return{data:i,projection:d3.geo.transform({point:function(e,i){e=e/n.layers[o.__currentLayer].extent*r.width,i=i/n.layers[o.__currentLayer].extent*r.height,t.hidpiPolyfill&&(e*=1/window.devicePixelRatio,i*=1/window.devicePixelRatio),this.stream.point(e,i)}})}}};var f="auto";o.mode=function(e){return f=e,o};var s=[];return o.render=function(e,t){if("function"==typeof t)return s.push({layer:e,run:t}),o;var n=new r(o,e);return s.push({layer:e,run:n.run.bind(n)}),n},o.drawTile=function(e,r,n){var a=e.getContext("2d");r={x:r.x,y:r.y,z:n};var u;if("auto"==f){var c=o._url.split("?")[0].split(".").pop();for(var l in i)if(-1!=i[l].extensions.indexOf(c)){u=i[l];break}if(!u)throw new Error("I don't know what to do with URLs ending in ."+c)}else u="object"==typeof f?f:i[f];var p=o.getTileUrl(r);u.get(p,function(n,i){if(n)throw n;var f=u.parse(i.response,e),c=d3.geo.path().projection(f.projection).context(a),l=e.width,p=e.height;if(t.hidpiPolyfill&&(l*=1/window.devicePixelRatio,l*=1/window.devicePixelRatio),a.clearRect(0,0,l,p),!s.length)throw new Error("No renderer specified!");s.forEach(function(e){f.data[e.layer]&&(o.__currentLayer=e.layer,e.run(a,f.data[e.layer].features,r,function(e){"object"!=typeof e||Array.isArray(e)||(e=[e]),a.beginPath(),e.forEach(c)}))}),o.tileDrawn(e)})},o}},{"./renderingInterface":2}],2:[function(e,t){var r=function(e,t){this.layer=e,this.layerName=t,this.instructions=[],this.whereConditions=[];var r=this;Object.keys(e.__proto__).forEach(function(t){r[t]=function(){return e[t].apply(e,arguments)}}),["render","data","mode","addTo"].forEach(function(t){r[t]=function(){return e[t].apply(e,arguments)}})};r.prototype.minZoom=function(e){return this.minZoom=e,this},r.prototype.maxZoom=function(e){return this.maxZoom=e,this},r.prototype.fill=function(e){return this.instructions.push({type:"fill",color:e}),this},r.prototype.stroke=function(e,t){return this.instructions.push({type:"stroke",width:e,color:t}),this},r.prototype.fillBy=function(e,t,r){return this.fill(function(o){return t[o.properties[e]]||r}),this},r.prototype.strokeBy=function(e,t,r){return this.stroke(function(o){return t[o.properties[e]]||r}),this},r.prototype._where=function(e){var t=e.field,r=e.value;if("undefined"==typeof r)if("string"==typeof t)this.where(function(e){return e.properties[t]?!0:!1},void 0,e.invert);else if("object"==typeof t)for(var o in t)this.where(o,t[o],e.invert);else{if("function"!=typeof t)throw new Error("with RenderingInterface.where(field, value) if value is undefined then field must be a string, object, or function!");if(e.invert){var n=t;t=function(){return!n.apply(null,arguments)}}this.whereConditions.push(t)}else if("string"==typeof r||"number"==typeof r)this.where(function(e){return e.properties[t]==r},void 0,e.invert);else{if("object"!=typeof r||!Array.isArray(r))throw new Error("RenderingInterface.where(field, value) cannot be called with field as type "+typeof t+" and value as type "+typeof r);this.where(function(e){return-1!=r.indexOf(e.properties[t])},void 0,e.invert)}return this},r.prototype.where=function(e,t,r){return this._where({field:e,value:t,invert:r})},r.prototype.whereNot=function(e,t){return this._where({field:e,value:t,invert:!0})},r.prototype.run=function(e,t,r,o){"number"==typeof this.minZoom&&r.z<this.minZoom||"number"==typeof this.maxZoom&&r.z>this.maxZoom||(this.whereConditions.forEach(function(e){t=t.filter(e)}),this.instructions.forEach(function(r){if("fill"==r.type)if("string"==typeof r.color)e.fillStyle=r.color,o(t),e.fill();else{if("function"!=typeof r.color)throw new Error("fill color must be string or function, is type "+typeof r.color);t.forEach(function(t){e.fillStyle=r.color(t),o(t),e.fill()})}else if("stroke"==r.type)if("number"==typeof r.width&&"string"==typeof r.color)e.lineWidth=r.width,e.strokeStyle=r.color,o(t),e.stroke();else{if("function"!=typeof r.width&&"function"!=typeof r.color)throw new Error("Expected stroke(number or function, string or function) or stroke(function), got stroke("+typeof r.width+", "+typeof r.color+")");t.forEach(function(t){var n="function"==typeof r.width?r.width(t):r.width,i="function"==typeof r.color?r.color(t):r.color;"undefined"==typeof r.color&&Array.isArray(n)&&(i=n[1],n=n[0]),o(t),e.stroke()})}}))},t.exports=r},{}]},{},[1])(1)});